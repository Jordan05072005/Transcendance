@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root {
  font-family: 'Outfit', system-ui, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.9);
  background-color: #0F172A;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  --radius: 1rem;

  --background: 210 40% 98%;
  --foreground: 222 47% 11%;

  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;

  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;

  --primary: 217 91% 60%;
  --primary-foreground: 210 40% 98%;

  --secondary: 210 40% 96.1%;
  --secondary-foreground: 222 47% 11.2%;

  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;

  --accent: 210 40% 96.1%;
  --accent-foreground: 222 47% 11.2%;

  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;

  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 221.2 83.2% 53.3%;
}

.dark {
  --background: 222 47% 11%;
  --foreground: 210 40% 98%;

  --card: 222 47% 11%;
  --card-foreground: 210 40% 98%;

  --popover: 222 47% 11%;
  --popover-foreground: 210 40% 98%;

  --primary: 217 91% 60%;
  --primary-foreground: 222 47% 11%;

  --secondary: 217 19% 27%;
  --secondary-foreground: 210 40% 98%;

  --muted: 217 19% 27%;
  --muted-foreground: 215 20.2% 65.1%;

  --accent: 217 19% 27%;
  --accent-foreground: 210 40% 98%;

  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;

  --border: 217 19% 27%;
  --input: 217 19% 27%;
  --ring: 224.3 76.3% 48%;
}

@layer base {
  * {
    border-color: hsl(var(--border));
    outline-color: hsl(var(--ring) / 0.5);
  }

  body {
    background-color: #050505;
    color: #33ff00;
    font-family: 'Courier New', Courier, monospace;
    overflow: hidden;
    user-select: none;
  }

  /* High fidelity typography overrides */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: 'Courier New', Courier, monospace;
    letter-spacing: -0.02em;
  }

  button {
    font-family: 'Courier New', Courier, monospace;
    letter-spacing: 0.02em;
  }
}

/* color pour le retro */

:root {
  --vhs-primary: #33ff00;
  --vhs-bg: #050505;
  --vhs-dark: #000;
  --vhs-card-bg: rgba(10, 10, 10, 0.85);
  --vhs-secondary: #2a9d8f;
}

/* nos anims */
@keyframes scrollGrid {
  0% {
    transform: translate(0, 0);
  }

  100% {
    transform: translate(-80px, -70px);
  }
}

@keyframes text-flicker {

  0%,
  19%,
  21%,
  23%,
  25%,
  54%,
  56%,
  100% {
    opacity: 1;
  }

  20%,
  24%,
  55% {
    opacity: 0.5;
  }
}

@keyframes flicker {
  0% {
    opacity: 0.98;
  }

  5% {
    opacity: 0.95;
  }

  10% {
    opacity: 0.9;
  }

  15% {
    opacity: 0.95;
  }

  50% {
    opacity: 0.99;
  }

  80% {
    opacity: 0.9;
  }

  100% {
    opacity: 0.98;
  }
}

@keyframes vhs-twitch {

  0%,
  95% {
    transform: translateX(0);
  }

  96% {
    transform: translateX(-2px);
  }

  97% {
    transform: translateX(1px);
  }

  98% {
    transform: translateX(0);
  }

  99% {
    transform: translateX(-1px);
  }

  100% {
    transform: translateX(0);
  }
}

@keyframes hyper-glitch-anim {
  0% {
    transform: translate(0, 0) skew(0deg);
    opacity: 1;
  }

  20% {
    transform: translate(-10px, 5px) skew(10deg);
    opacity: 0.8;
  }

  40% {
    transform: translate(10px, -5px) skew(-10deg);
    opacity: 0.9;
  }

  60% {
    transform: translate(-5px, 10px) skew(5deg);
    opacity: 0.1;
  }

  80% {
    transform: translate(5px, -10px) skew(-5deg);
    opacity: 1;
  }

  100% {
    transform: translate(0, 0) skew(0deg);
    opacity: 1;
  }
}

@keyframes glitch-in {
  0% {
    transform: translateX(100px) skew(10deg);
    opacity: 0;
  }

  30% {
    transform: translateX(-10px) skew(-5deg);
    opacity: 0.8;
  }

  60% {
    transform: translateX(5px) skew(2deg);
    opacity: 1;
  }

  100% {
    transform: translateX(0) skew(0deg);
    opacity: 1;
  }
}

@keyframes notif-slide-in {
  0% {
    transform: translateX(120%);
    opacity: 0;
  }

  50% {
    transform: translateX(-10px) skew(-2deg);
    opacity: 1;
  }

  100% {
    transform: translateX(0) skew(0deg);
    opacity: 1;
  }
}

@keyframes notif-glitch-out {
  0% {
    transform: translateX(0);
    opacity: 1;
  }

  20% {
    transform: translateX(-20px) skew(5deg);
    opacity: 0.8;
  }

  40% {
    transform: translateX(10px) skew(-10deg);
    opacity: 0.6;
  }

  60% {
    transform: translateX(-5px) skew(15deg);
    opacity: 0.4;
  }

  80% {
    transform: translateX(100px) skew(-5deg);
    opacity: 0.2;
  }

  100% {
    transform: translateX(150%);
    opacity: 0;
  }
}

@keyframes notif-text-glitch {
  0% {
    text-shadow: 2px 0 red, -2px 0 cyan;
  }

  25% {
    text-shadow: -2px 0 red, 2px 0 cyan;
  }

  50% {
    text-shadow: 2px 2px red, -2px -2px cyan;
  }

  75% {
    text-shadow: -1px 1px red, 1px -1px cyan;
  }

  100% {
    text-shadow: none;
  }
}

@keyframes notif-scan {
  0% {
    transform: translateX(-100%);
  }

  100% {
    transform: translateX(100%);
  }
}

@layer utilities {
  .animate-scrollGrid {
    will-change: transform;
    transform: translateZ(0);
    /* peut etre que ca force le gpu au lieu du cpu?? */
    animation: scrollGrid 10s linear infinite;
  }

  .animate-text-flicker {
    will-change: opacity;
    animation: text-flicker 3s infinite;
  }

  .animate-flicker {
    will-change: opacity;
    animation: flicker 0.15s infinite;
  }

  .animate-vhs-twitch {
    will-change: transform;
    animation: vhs-twitch 4s infinite;
  }

  .animate-hyper-glitch {
    animation: hyper-glitch-anim 0.5s steps(5) infinite;
  }

  .animate-glitch-in {
    animation: glitch-in 0.4s ease-out;
  }

  .animate-notif-slide-in {
    animation: notif-slide-in 0.4s ease-out;
  }

  .animate-notif-glitch-out {
    animation: notif-glitch-out 0.5s ease-in forwards;
  }

  .vhs-noise-bg {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  }

  .ascii-mask {
    -webkit-mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 20%, rgba(0, 0, 0, 0) 70%);
    mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 20%, rgba(0, 0, 0, 0) 70%);
  }

  .vhs-text-effect {
    /*     text-shadow: 2px 0 1px rgba(255, 0, 0, 0.5), -2px 0 1px rgba(0, 0, 0, 0.5), 0 0 6px rgba(51, 255, 0, 0.8);
    filter: blur(0.4px) contrast(1.2); */
    text-shadow: 2px 0 0 rgba(255, 0, 0, 0.5), -2px 0 0 rgba(0, 0, 0, 0.5);
  }

  .hyper-glitch-active {
    animation: hyper-glitch-anim 0.5s steps(5) infinite !important;
    /*   filter: contrast(200%) brightness(150%) hue-rotate(90deg) !important; */
    will-change: transform, opacity;
    filter: contrast(120%) brightness(110%) !important;
    background-color: #111 !important;
  }
}